# Generated by CMake Nix Generator
with import <nixpkgs> {};

let
  # Per-translation-unit derivations
  threaded_app_threaded_c_o = stdenv.mkDerivation {
    name = "threaded.o";
    src = ./.;
    buildInputs = [ gcc ];
    dontFixup = true;
    # Configuration: Release
    buildPhase = ''
      gcc -c  "../threaded.c" -o "$out"
    '';
    installPhase = "true"; # No install needed for objects
  };


  # Linking derivations
  link_threaded_app = stdenv.mkDerivation {
    name = "threaded_app";
    buildInputs = [ gcc ];
    dontUnpack = true;
    objects = [
      threaded_app_threaded_c_o
    ];
    buildPhase = ''
      gcc $objects -o "$out"
    '';
    installPhase = "true"; # No install needed
  };

in
{
  "threaded_app" = link_threaded_app;
}

#!/usr/bin/env just --justfile

# Configure and build with Nix generator
configure:
    rm -f default.nix
    ../bin/cmake -G Nix -DCMAKE_MAKE_PROGRAM=nix-build .

# Build the fmt example
build: configure
    nix-build -A fmt_example

# Run the fmt example
run: build
    ./result && rm ./result

# Clean build artifacts
clean:
    rm -rf default.nix result _deps CMakeCache.txt CMakeFiles cmake_install.cmake

# Full test cycle
test: clean run
    @echo "âœ… fmt library test completed"